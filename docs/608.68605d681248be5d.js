"use strict";(self.webpackChunkherois_crud=self.webpackChunkherois_crud||[]).push([[608],{8608:(J,E,o)=>{o.r(E),o.d(E,{HeroiCadastrarEditarModule:()=>G});var v=o(6814),c=o(4828),r=o(6223),e=o(5879),b=o(1217),u=o(4170),m=o(2495),f=o(2831),S=o(6232),y=o(8645);const A=(0,f.i$)({passive:!0});let F=(()=>{class s{constructor(t,i){this._platform=t,this._ngZone=i,this._monitoredElements=new Map}monitor(t){if(!this._platform.isBrowser)return S.E;const i=(0,m.fI)(t),n=this._monitoredElements.get(i);if(n)return n.subject;const a=new y.x,l="cdk-text-field-autofilled",_=d=>{"cdk-text-field-autofill-start"!==d.animationName||i.classList.contains(l)?"cdk-text-field-autofill-end"===d.animationName&&i.classList.contains(l)&&(i.classList.remove(l),this._ngZone.run(()=>a.next({target:d.target,isAutofilled:!1}))):(i.classList.add(l),this._ngZone.run(()=>a.next({target:d.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{i.addEventListener("animationstart",_,A),i.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(i,{subject:a,unlisten:()=>{i.removeEventListener("animationstart",_,A)}}),a}stopMonitoring(t){const i=(0,m.fI)(t),n=this._monitoredElements.get(i);n&&(n.unlisten(),n.subject.complete(),i.classList.remove("cdk-text-field-autofill-monitored"),i.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(i))}ngOnDestroy(){this._monitoredElements.forEach((t,i)=>this.stopMonitoring(i))}static#e=this.\u0275fac=function(i){return new(i||s)(e.LFG(f.t4),e.LFG(e.R0b))};static#t=this.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})(),w=(()=>{class s{static#e=this.\u0275fac=function(i){return new(i||s)};static#t=this.\u0275mod=e.oAB({type:s});static#i=this.\u0275inj=e.cJS({})}return s})();var p=o(3680);const k=new e.OlP("MAT_INPUT_VALUE_ACCESSOR"),N=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let Z=0;const L=(0,p.FD)(class{constructor(s,h,t,i){this._defaultErrorStateMatcher=s,this._parentForm=h,this._parentFormGroup=t,this.ngControl=i,this.stateChanges=new y.x}});let P=(()=>{class s extends L{get disabled(){return this._disabled}set disabled(t){this._disabled=(0,m.Ig)(t),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(t){this._id=t||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(r.kI.required)??!1}set required(t){this._required=(0,m.Ig)(t)}get type(){return this._type}set type(t){this._type=t||"text",this._validateType(),!this._isTextarea&&(0,f.qK)().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(t){t!==this.value&&(this._inputValueAccessor.value=t,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(t){this._readonly=(0,m.Ig)(t)}constructor(t,i,n,a,l,_,d,Y,j,T){super(_,a,l,n),this._elementRef=t,this._platform=i,this._autofillMonitor=Y,this._formField=T,this._uid="mat-input-"+Z++,this.focused=!1,this.stateChanges=new y.x,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(C=>(0,f.qK)().has(C)),this._iOSKeyupListener=C=>{const g=C.target;!g.value&&0===g.selectionStart&&0===g.selectionEnd&&(g.setSelectionRange(1,1),g.setSelectionRange(0,0))};const x=this._elementRef.nativeElement,R=x.nodeName.toLowerCase();this._inputValueAccessor=d||x,this._previousNativeValue=this.value,this.id=this.id,i.IOS&&j.runOutsideAngular(()=>{t.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===R,this._isTextarea="textarea"===R,this._isInFormField=!!T,this._isNativeSelect&&(this.controlType=x.multiple?"mat-native-select-multiple":"mat-native-select")}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(t=>{this.autofilled=t.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&(this.updateErrorState(),null!==this.ngControl.disabled&&this.ngControl.disabled!==this.disabled&&(this.disabled=this.ngControl.disabled,this.stateChanges.next())),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(t){this._elementRef.nativeElement.focus(t)}_focusChanged(t){t!==this.focused&&(this.focused=t,this.stateChanges.next())}_onInput(){}_dirtyCheckNativeValue(){const t=this._elementRef.nativeElement.value;this._previousNativeValue!==t&&(this._previousNativeValue=t,this.stateChanges.next())}_dirtyCheckPlaceholder(){const t=this._getPlaceholder();if(t!==this._previousPlaceholder){const i=this._elementRef.nativeElement;this._previousPlaceholder=t,t?i.setAttribute("placeholder",t):i.removeAttribute("placeholder")}}_getPlaceholder(){return this.placeholder||null}_validateType(){N.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let t=this._elementRef.nativeElement.validity;return t&&t.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const t=this._elementRef.nativeElement,i=t.options[0];return this.focused||t.multiple||!this.empty||!!(t.selectedIndex>-1&&i&&i.label)}return this.focused||!this.empty}setDescribedByIds(t){t.length?this._elementRef.nativeElement.setAttribute("aria-describedby",t.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const t=this._elementRef.nativeElement;return this._isNativeSelect&&(t.multiple||t.size>1)}static#e=this.\u0275fac=function(i){return new(i||s)(e.Y36(e.SBq),e.Y36(f.t4),e.Y36(r.a5,10),e.Y36(r.F,8),e.Y36(r.sg,8),e.Y36(p.rD),e.Y36(k,10),e.Y36(F),e.Y36(e.R0b),e.Y36(u.G_,8))};static#t=this.\u0275dir=e.lG2({type:s,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-mdc-input-element"],hostVars:18,hostBindings:function(i,n){1&i&&e.NdJ("focus",function(){return n._focusChanged(!0)})("blur",function(){return n._focusChanged(!1)})("input",function(){return n._onInput()}),2&i&&(e.Ikx("id",n.id)("disabled",n.disabled)("required",n.required),e.uIk("name",n.name||null)("readonly",n.readonly&&!n._isNativeSelect||null)("aria-invalid",n.empty&&n.required?null:n.errorState)("aria-required",n.required)("id",n.id),e.ekj("mat-input-server",n._isServer)("mat-mdc-form-field-textarea-control",n._isInFormField&&n._isTextarea)("mat-mdc-form-field-input-control",n._isInFormField)("mdc-text-field__input",n._isInFormField)("mat-mdc-native-select-inline",n._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[e._Bn([{provide:u.Eo,useExisting:s}]),e.qOj,e.TTD]})}return s})(),B=(()=>{class s{static#e=this.\u0275fac=function(i){return new(i||s)};static#t=this.\u0275mod=e.oAB({type:s});static#i=this.\u0275inj=e.cJS({imports:[p.BQ,u.lN,u.lN,w,p.BQ]})}return s})();var I=o(1274),H=o(2296),M=o(8841);function D(s,h){if(1&s&&(e.TgZ(0,"mat-option",13),e._uU(1),e.qZA()),2&s){const t=h.$implicit;e.MGl("value",'{"id":',t.id,',"nome":"nome","descricao":"descricao"}'),e.xp6(1),e.Oqu(t.nome)}}function O(s,h){if(1&s){const t=e.EpF();e.TgZ(0,"form",2),e.NdJ("ngSubmit",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.formGroup.valid&&n.salvar())}),e.TgZ(1,"mat-form-field")(2,"mat-label"),e._uU(3,"Nome"),e.qZA(),e._UZ(4,"input",3),e.qZA(),e.TgZ(5,"mat-form-field")(6,"mat-label"),e._uU(7,"Nome do Her\xf3i"),e.qZA(),e._UZ(8,"input",4),e.qZA(),e.TgZ(9,"mat-form-field")(10,"mat-label"),e._uU(11,"Super Poderes"),e.qZA(),e.TgZ(12,"mat-select",5),e.YNc(13,D,2,2,"mat-option",6),e.qZA()(),e.TgZ(14,"mat-form-field")(15,"mat-label"),e._uU(16,"Altura (cm)"),e.qZA(),e._UZ(17,"input",7),e.qZA(),e.TgZ(18,"mat-form-field")(19,"mat-label"),e._uU(20,"Peso (kg)"),e.qZA(),e._UZ(21,"input",8),e.qZA(),e.TgZ(22,"mat-form-field")(23,"mat-label"),e._uU(24,"Data de Anivers\xe1rio"),e.qZA(),e._UZ(25,"input",9),e.qZA(),e.TgZ(26,"div",10)(27,"button",11),e._uU(28,"Salvar"),e.qZA(),e.TgZ(29,"button",12),e._uU(30,"Cancelar"),e.qZA()()()}if(2&s){const t=e.oxw();e.Q6J("formGroup",t.formGroup),e.xp6(13),e.Q6J("ngForOf",t.listaSuperPoderes),e.xp6(14),e.Q6J("disabled",!t.formGroup.valid)}}let q=(()=>{class s{constructor(t,i,n,a){this.formBuilder=t,this.heroiService=i,this.router=n,this.activatedRoute=a}ngOnInit(){this.heroi=this.activatedRoute.snapshot.data.heroi[0],this.heroiService.buscarSuperPoderes().subscribe(t=>{this.listaSuperPoderes=t}),this.formGroup=this.formBuilder.group({id:[this.heroi?this.heroi.id:null,r.kI.required],nome:[this.heroi?this.heroi.nome:null,r.kI.required],nomeHeroi:[this.heroi?this.heroi.nomeHeroi:null,r.kI.required],superPoderes:[this.heroi?this.heroi.superPoderes:null,r.kI.required],altura:[this.heroi?this.heroi.altura:null,r.kI.required],peso:[this.heroi?this.heroi.peso:null,r.kI.required],nascimento:[this.heroi?this.heroi.nascimento:null,r.kI.required]})}salvar(){let t=[];for(let i=0;i<this.formGroup.value.superPoderes.length;i++)t.push(JSON.parse(this.formGroup.value.superPoderes[i]));this.formGroup.value.superPoderes=t,this.heroi&&this.heroi.id?this.heroiService.atualizar(this.formGroup.value).subscribe(i=>{alert("Erro ao editar."+JSON.stringify(i)),this.router.navigateByUrl("/")},i=>{}):this.heroiService.cadastrar(this.formGroup.value).subscribe(i=>{alert("Erro ao editar."+JSON.stringify(i)),this.router.navigateByUrl("/")},i=>{})}static#e=this.\u0275fac=function(i){return new(i||s)(e.Y36(r.qu),e.Y36(b.R),e.Y36(c.F0),e.Y36(c.gz))};static#t=this.\u0275cmp=e.Xpm({type:s,selectors:[["app-heroi-cadastrar-editar"]],decls:4,vars:2,consts:[[1,"container-componente"],["class","formulario","novalidate","",3,"formGroup","ngSubmit",4,"ngIf"],["novalidate","",1,"formulario",3,"formGroup","ngSubmit"],["matInput","","formControlName","nome","autocomplete","disabled"],["matInput","","formControlName","nomeHeroi","autocomplete","disabled"],["ng-disabled","heroi && heroi.id","formControlName","superPoderes","multiple",""],[3,"value",4,"ngFor","ngForOf"],["matInput","","type","number","formControlName","altura","autocomplete","disabled"],["matInput","","type","number","formControlName","peso","required","","autocomplete","disabled"],["type","date","matInput","","formControlName","nascimento","required","","autocomplete","disabled"],[1,"linha-botoes"],["mat-raised-button","","color","primary",3,"disabled"],["type","button","mat-raised-button","","routerLink","/"],[3,"value"]],template:function(i,n){1&i&&(e.TgZ(0,"mat-toolbar"),e._uU(1),e.qZA(),e.TgZ(2,"div",0),e.YNc(3,O,31,3,"form",1),e.qZA()),2&i&&(e.xp6(1),e.Oqu(n.heroi&&n.heroi.id?"Editar Registro":"Cadastrar"),e.xp6(2),e.Q6J("ngIf",n.formGroup))},dependencies:[v.sg,v.O5,c.rH,r._Y,r.Fj,r.wV,r.JJ,r.JL,r.Q7,r.sg,r.u,u.KE,u.hX,P,I.Ye,H.lW,M.gD,p.ey]})}return s})();var z=o(2096);const U=[{path:"",component:q,resolve:{heroi:(()=>{class s{constructor(t){this.heroiService=t}resolve(t,i){const n=t.params.id;return n?this.heroiService.buscaPorId(n):(0,z.of)({})}static#e=this.\u0275fac=function(i){return new(i||s)(e.LFG(b.R))};static#t=this.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})()}}];let V=(()=>{class s{static#e=this.\u0275fac=function(i){return new(i||s)};static#t=this.\u0275mod=e.oAB({type:s});static#i=this.\u0275inj=e.cJS({imports:[c.Bz.forChild(U),c.Bz]})}return s})(),G=(()=>{class s{static#e=this.\u0275fac=function(i){return new(i||s)};static#t=this.\u0275mod=e.oAB({type:s});static#i=this.\u0275inj=e.cJS({imports:[v.ez,V,r.UX,u.lN,B,I.g0,H.ot,M.LD]})}return s})()}}]);